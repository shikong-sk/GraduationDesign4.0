<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>后台管理</title>

    <link rel="shortcut icon" href="Storage/global/1.ico" type="image/x-icon" />

    <script src="Assets/js/jquery-3.3.1.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="Assets/js/bootstrap.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="Assets/js/popper.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="Assets/js/vue.js" type="text/javascript" charset="utf-8"></script>
    <script src="Assets/js/axios.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="Assets/js/qs.min.js" type="text/javascript" charset="utf-8"></script>

    <!-- <script src="Assets/js/iview.min.js" type="text/javascript" charset="utf-8"></script> -->
    <!-- <link rel="stylesheet" type="text/css" href="Assets/css/iview.css" /> -->

    <link rel="stylesheet" type="text/css" href="Assets/css/bootstrap.min.css" />

    <link rel="stylesheet" type="text/css" href="Assets/css/swiper.min.css" />

    <script src="Assets/js/swiper.min.js" type="text/javascript" charset="utf-8"></script>

    <script src="Assets/js/element-ui.js" type="text/javascript" charset="utf-8"></script>
    <link rel="stylesheet" type="text/css" href="Assets/css/element-ui.css" />

    <script src="Assets/js/vuex.js" type="text/javascript" charset="utf-8"></script>

    <script src="Assets/js/tinymce/tinymce.min.js" type="text/javascript" charset="utf-8"></script>

    <script src="Assets/js/jquery.base64.js" type="text/javascript" charset="utf-8"></script>

    <script src="Assets/js/echarts.min.js" type="text/javascript" charset="utf-8"></script>



    <style type="text/css">
        body,
        html {
            overflow-x: hidden;
        }
        
        .text-danger {
            color: #F56C6C !important;
        }
        
        body .el-table th.gutter {
            display: table-cell!important;
        }
        
        [v-cloak] {
            display: none;
        }
        
        .table-expand {
            font-size: 0;
        }
        
        .table-expand label {
            width: 50%;
            color: #99a9bf;
        }
        
        .table-expand .el-form-item {
            margin-right: 0;
            margin-bottom: 0;
            width: 100%;
        }
    </style>

    <script type="text/javascript">
        //公用函数定义
        function sleep(fun, ms) {
            setTimeout(fun, ms);
        }

        function loop(fun, ms) {
            fun();
            setInterval(fun, ms);
        }

        addEventListener(
            "load",
            function() {
                setTimeout(hideURLbar, 0);
            },
            false
        );

        function hideURLbar() {
            window.scrollTo(0, 1);
        }

        function linkTo(target) {
            window.location = target
        }
    </script>
</head>

<body>
    <div id="header" v-cloak>
        <el-row>
            <el-col :sm="4" class="text-center">
                <img style="max-width: 120px;max-height: 50px;text-align: center;" src="Storage/global/Logo.png" alt="logo" class="img-fluid">
            </el-col>
            <el-col :sm="18">
                <el-menu :default-active="activeIndex" mode="horizontal">
                    <el-menu-item index="1" @click="linkTo('./index.html')">首页</el-menu-item>
                </el-menu>
            </el-col>
            <el-col :md="2" :xs="24">
                <div style="text-align: center;position: relative;height:61px" class="mx-auto">
                    <div v-if="login">
                        <el-menu style="position: absolute;z-index: 99;width: 100%;">
                            <el-submenu index="100">
                                <template slot="title">
                                    <div style="overflow-x: hidden;text-overflow: ellipsis;">
                                        <span>{{userName}}</span>
                                    </div>
                                </template>
                                <el-menu-item index="100-1" style="min-width:100%;padding: 0;position: relative;z-index: 99999;">个人中心</el-menu-item>
                                <el-menu-item @click="logout()" index="100-2" style="min-width:100%;padding: 0;position: relative;z-index: 99999;">退出登录</el-menu-item>
                            </el-submenu>
                        </el-menu>
                    </div>

                    <div v-else>
                        <el-menu>
                            <el-menu-item @click="linkTo('./login.html')">登录</el-menu-item>
                        </el-menu>
                    </div>
                </div>
            </el-col>
        </el-row>
    </div>

    <script>
        var header = new Vue({
            el: "#header",
            data() {
                return {
                    activeIndex: "1",
                    login: false,

                    userName: undefined,
                    identity: undefined,

                }
            },
            mounted() {
                axios.post('./System/Core/API/Function/CheckLogin/index.php', Qs.stringify({}), ).then(function(res) {
                    if ('loginStatus' in res.data) {
                        header.login = res.data.loginStatus
                        if (res.data.loginStatus) {
                            axios.post('./System/Core/API/Function/GetIdentity/index.php', Qs.stringify({}), ).then(function(res) {
                                header.identity = res.data.identity
                                axios.post('./System/Core/API/Function/GetUserInfo/index.php', Qs.stringify({}), ).then(function(res) {
                                    switch (header.identity) {
                                        case 'Student':
                                            header.userName = res.data.slice(1)[0].studentName
                                            break;
                                        case 'Teacher':
                                            header.userName = res.data.slice(1)[0].teacherName
                                            break;
                                    }
                                })
                            })
                        }
                    }
                })
            },
            methods: {
                showWarning(message) {
                    header.$message({
                        showClose: true,
                        message: message,
                        type: 'warning',
                        duration: 5000
                    });
                },
                showInfo(message) {
                    header.$message({
                        showClose: true,
                        message: message,
                        type: 'info',
                        duration: 5000
                    });
                },
                showSuccess(message) {
                    header.$message({
                        showClose: true,
                        message: message,
                        type: 'success',
                        duration: 5000
                    });
                },
                showError(message) {
                    header.$message({
                        showClose: true,
                        message: message,
                        type: 'error',
                        duration: 5000
                    });
                },
                linkTo(target) {
                    linkTo(target)
                },
                logout() {
                    axios.post('./System/Core/API/Function/Logout/index.php', Qs.stringify({}), ).then(function(res) {
                        if ('error' in res.data) {
                            header.showError(res.data.error)
                        }
                        if ('success' in res.data) {
                            header.showSuccess(res.data.success)
                            sleep(function() {
                                location.href = './index.html'
                            }, 500)
                        }
                        if ('info' in res.data) {
                            header.showInfo(res.data.info)
                        }
                        if ('warning' in res.data) {
                            header.showWarning(res.data.warning)
                        }
                    })
                }
            }
        })
    </script>

    <div id="management" v-cloak>
        <el-row>
            <el-col :xs="nav_Menu_xs" :sm="nav_Menu_sm" :md="nav_Menu_md">
                <el-menu :unique-opened="true" style="overflow-x:hidden" :default-active="index" :collapse="collapse" @select="(i,path)=>{this.$set(this,'index',i);log(path)}" @open="" @close="">
                    <el-button type="text" @click="()=>{collapse = !collapse}" :icon="collapse?'el-icon-s-unfold':'el-icon-s-fold'" class="w-100">
                        {{collapse?'':''}}
                    </el-button>

                    <el-submenu index="1">
                        <template slot="title">
                            <i class="el-icon-user-solid"></i>
                            <span>学生详情</span>
                        </template>
                        <el-menu-item-group>
                            <el-menu-item index="1-1">课程信息</el-menu-item>
                            <el-menu-item index="1-2">班级信息</el-menu-item>
                            <el-menu-item index="1-3">学生信息</el-menu-item>
                            <el-menu-item index="1-4">分数登记</el-menu-item>
                        </el-menu-item-group>
                        <el-menu-item-group title="管理员功能" v-if="permission == '0' || permission == '1' ">
                            <el-menu-item index="1-5">学生信息管理</el-menu-item>
                            <el-menu-item index="1-6">分数信息管理</el-menu-item>
                        </el-menu-item-group>
                    </el-submenu>

                    <el-submenu index="2" v-if="permission == '0' || permission == '1'">
                        <template slot="title">
                            <i class="el-icon-s-custom"></i>
                            <span slot="title">教工详情</span>
                        </template>
                        <el-menu-item-group title="管理员功能">
                            <el-menu-item index="2-1">教工信息管理</el-menu-item>
                        </el-menu-item-group>
                    </el-submenu>

                    <el-menu-item index="3" v-if="permission == '0'">
                        <i class="el-icon-notebook-1"></i>
                        <span slot="title">院系管理</span>
                    </el-menu-item>

                    <el-menu-item index="4" v-if="permission == '0'">
                        <i class="el-icon-notebook-2"></i>
                        <span slot="title">专业管理</span>
                    </el-menu-item>

                    <el-menu-item index="5" v-if="permission == '0'">
                        <i class="el-icon-office-building"></i>
                        <span slot="title">年级管理</span>
                    </el-menu-item>

                    <el-menu-item index="6" v-if="permission == '0'">
                        <i class="el-icon-school"></i>
                        <span slot="title">班级管理</span>
                    </el-menu-item>
                </el-menu>
            </el-col>
            <el-col :xs="24 - nav_Menu_xs == 0?24:24 - nav_Menu_xs" :sm="24 - nav_Menu_sm" :md="24 - nav_Menu_md">

                <div v-if="index == '1-1'">

                    <el-row>
                        <el-col :xs="6" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].courseName" placeholder="课程名称" clearable @clear="()=>{dataModel[index].courseName == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="6" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].classId" placeholder="班级编号" clearable @clear="()=>{dataModel[index].classId == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="6" :sm="6" :md="6" v-if="permission == '0' || permission == '1'">
                            <el-input class="w-100" v-model="dataModel[index].teacherName" placeholder="教工姓名" clearable @clear="()=>{dataModel[index].teacherName == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="6" :sm="6" :md="6">
                            <el-select class="w-100" v-model="dataModel[index].public" placeholder="课程类别" clearable @clear="()=>{dataModel[index].public == undefined}">
                                <el-option label="普通课程" value="0">
                                </el-option>
                                <el-option label="公选课" value="1">
                                </el-option>
                            </el-select>
                        </el-col>

                        <el-col :xs="24" :sm="24" :md="24" v-if="permission == '0' || permission == '1'">
                            <el-button class="w-100" @click="()=>{getData()}">搜索</el-button>
                        </el-col>

                        <el-col :xs="6" :sm="6" :md="6" v-else>
                            <el-button class="w-100" @click="()=>{getData()}">搜索</el-button>
                        </el-col>
                    </el-row>

                    <el-table :data="data" style="width: 100%" border>
                        <el-table-column label="课程id" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.courseId}}
							</template>
                        </el-table-column>

                        <el-table-column label="课程名称" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.courseName}}
							</template>
                        </el-table-column>

                        <el-table-column label="班级编号" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.classId}}
							</template>
                        </el-table-column>

                        <el-table-column label="教工id" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.teacherId}}
							</template>
                        </el-table-column>

                        <el-table-column label="教工姓名" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.teacherName}}
							</template>
                        </el-table-column>

                        <el-table-column label="开始时间" width="100" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.startTime}}
							</template>
                        </el-table-column>

                        <el-table-column label="结束时间" width="100" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.endTime}}
							</template>
                        </el-table-column>

                        <el-table-column label="课程类别" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
                                <el-tag v-if="scope.row.public == 0">普通课程</el-tag>
                                <el-tag type="warning" v-if="scope.row.public == 1">公选课</el-tag>
                            </template>
                        </el-table-column>

                        <el-table-column fixed="right" label="操作" width="60">
                            <template slot-scope="scope">
								<div class="text-center">
									<el-button style="padding:5px 0;margin:0 auto" @click="" type="text" size="small">查看</el-button>
								</div>
							</template>
                        </el-table-column>
                    </el-table>
                </div>

                <div v-if="index == '1-2'">
                    <el-row>
                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].departmentName" placeholder="院系名称" clearable @clear="()=>{dataModel[index].departmentName == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].majorName" placeholder="专业名称" clearable @clear="()=>{dataModel[index].majorName == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="6" :sm="3" :md="3">
                            <el-input class="w-100" v-model="dataModel[index].grade" placeholder="年级" clearable @clear="()=>{dataModel[index].grade == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="6" :sm="3" :md="3">
                            <el-input class="w-100" v-model="dataModel[index].years" placeholder="学制" clearable @clear="()=>{dataModel[index].years == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].classId" placeholder="班级编号" clearable @clear="()=>{dataModel[index].classId == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="24" :sm="24" :md="24">
                            <el-button class="w-100" @click="()=>{getData()}">搜索</el-button>
                        </el-col>

                    </el-row>

                    <el-table :data="data" style="width: 100%" border>
                        <el-table-column label="班级编号" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.classId}}
							</template>
                        </el-table-column>

                        <el-table-column label="院系编号" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.departmentId}}
							</template>
                        </el-table-column>

                        <el-table-column label="院系名" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.departmentName}}
							</template>
                        </el-table-column>

                        <el-table-column label="专业编号" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.majorId}}
							</template>
                        </el-table-column>

                        <el-table-column label="专业名称" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.majorName}}
							</template>
                        </el-table-column>

                        <el-table-column label="学制" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.years}}年
							</template>
                        </el-table-column>

                        <el-table-column label="班号" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.class}}班
							</template>
                        </el-table-column>

                        <el-table-column label="学生人数" width="100" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
                                {{scope.row.studentNum}}
							</template>
                        </el-table-column>

                        <el-table-column fixed="right" label="操作" width="60">
                            <template slot-scope="scope">
								<div class="text-center">
									<el-button style="padding:5px 0;margin:0 auto" @click="" type="text" size="small">查看</el-button>
								</div>
							</template>
                        </el-table-column>
                    </el-table>
                </div>

                <div v-if="index == '1-3'">
                    <el-row>
                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].studentId" placeholder="学号" clearable @clear="()=>{dataModel[index].studentId == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].studentName" placeholder="学生姓名" clearable @clear="()=>{dataModel[index].studentName == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-select class="w-100" v-model="dataModel[index].gender" placeholder="性别" clearable @clear="()=>{dataModel[index].gender == undefined}">
                                <el-option label="男" value="男">
                                </el-option>
                                <el-option label="女" value="女">
                                </el-option>
                            </el-select>
                        </el-col>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].departmentName" placeholder="院系名称" clearable @clear="()=>{dataModel[index].departmentName == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].majorName" placeholder="专业名称" clearable @clear="()=>{dataModel[index].majorName == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="6" :sm="3" :md="3">
                            <el-input class="w-100" v-model="dataModel[index].grade" placeholder="年级" clearable @clear="()=>{dataModel[index].grade == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="6" :sm="3" :md="3">
                            <el-input class="w-100" v-model="dataModel[index].years" placeholder="学制" clearable @clear="()=>{dataModel[index].years == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].classId" placeholder="班级编号" clearable @clear="()=>{dataModel[index].classId == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].seat" placeholder="座号" clearable @clear="()=>{dataModel[index].seat == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="12" :md="12">
                            <el-input class="w-100" v-model="dataModel[index].contact" placeholder="联系方式" clearable @clear="()=>{dataModel[index].contact == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="12" :md="12">
                            <el-select class="w-100" v-model="dataModel[index].active" placeholder="账号状态" clearable @clear="()=>{dataModel[index].active == undefined}">
                                <el-option label="已激活" value="1">
                                </el-option>
                                <el-option label="未激活" value="0">
                                </el-option>
                            </el-select>
                        </el-col>

                        <el-col :xs="24" :sm="24" :md="24">
                            <el-button class="w-100" @click="()=>{getData()}">搜索</el-button>
                        </el-col>
                    </el-row>

                    <el-table :data="data" style="width: 100%" border>
                        <el-table-column label="学号" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.studentId}}
							</template>
                        </el-table-column>

                        <el-table-column label="学生姓名" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.studentName}}
							</template>
                        </el-table-column>

                        <el-table-column label="性别" width="80" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.gender}}
							</template>
                        </el-table-column>

                        <el-table-column label="年级" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.grade}}级
							</template>
                        </el-table-column>

                        <el-table-column label="院系名" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.departmentName}}
							</template>
                        </el-table-column>

                        <el-table-column label="专业编号" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.majorId}}
							</template>
                        </el-table-column>

                        <el-table-column label="专业名称" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.majorName}}
							</template>
                        </el-table-column>

                        <el-table-column label="学制" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.years}}年
							</template>
                        </el-table-column>

                        <el-table-column label="班级编号" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.classId}}
							</template>
                        </el-table-column>

                        <el-table-column label="班号" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.class}}班
							</template>
                        </el-table-column>

                        <el-table-column label="座号" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
                                {{scope.row.seat}}
							</template>
                        </el-table-column>

                        <el-table-column label="联系方式" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
                                {{scope.row.contact}}
							</template>
                        </el-table-column>

                        <el-table-column label="学生照片" width="100">
                            <template slot-scope="scope">
                                <div class="mx-auto text-center">
                                    <el-image v-if="scope.row.studentImg != null && scope.row.studentImg.length != 0" :preview-src-list="[scope.row.studentImg]"
                                    style="width: 100%;height:50px;" :src="scope.row.studentImg" fit="scale-down">
                                    </el-image>
                                    <span v-else> 未录入照片 </span>
                                </div>
                                </template>
                        </el-table-column>

                        <el-table-column label="账号状态" width="100" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
                                <el-tag v-if="scope.row.active == 1" type="success">已激活</el-tag>
                                <el-tag v-if="scope.row.active == 0" type="danger">未激活</el-tag>
							</template>
                        </el-table-column>

                        <el-table-column fixed="right" label="操作" width="60">
                            <template slot-scope="scope">
								<div class="text-center">
									<el-button style="padding:5px 0;margin:0 auto" @click="" type="text" size="small">查看</el-button>
								</div>
							</template>
                        </el-table-column>
                    </el-table>
                </div>

                <div v-if="index == '1-4'">
                    <el-row>
                        <!-- <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].courseId" placeholder="课程编号" clearable @clear="()=>{dataModel[index].courseId == undefined}">
                            </el-input>
                        </el-col> -->

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].courseName" placeholder="课程名称" clearable @clear="()=>{dataModel[index].courseName == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].studentId" placeholder="学号" clearable @clear="()=>{dataModel[index].studentId == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].studentName" placeholder="学生姓名" clearable @clear="()=>{dataModel[index].studentName == undefined}">
                            </el-input>
                        </el-col>

                        <!-- <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].teacherId" placeholder="教工id" clearable @clear="()=>{dataModel[index].teacherId == undefined}">
                            </el-input>
                        </el-col> -->

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].teacherName" placeholder="教工姓名" clearable @clear="()=>{dataModel[index].teacherName == undefined}">
                            </el-input>
                        </el-col>


                        <el-col :xs="24" :sm="24" :md="24">
                            <el-select class="w-100" v-model="dataModel[index].flag" placeholder="考试类型" clearable @clear="()=>{dataModel[index].flag == undefined}">
                                <el-option label="正考" value="0">
                                </el-option>
                                <el-option label="补考" value="1">
                                </el-option>
                                <el-option label="重修" value="2">
                                </el-option>
                            </el-select>
                        </el-col>

                        <el-col :xs="24" :sm="24" :md="24">
                            <el-button class="w-100" @click="()=>{getData()}">搜索</el-button>
                        </el-col>
                    </el-row>

                    <el-table :data="data" style="width: 100%" border>
                        <el-table-column label="学号" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.studentId}}
							</template>
                        </el-table-column>

                        <el-table-column label="学生姓名" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.studentName}}
							</template>
                        </el-table-column>

                        <el-table-column label="课程id" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.courseId}}
							</template>
                        </el-table-column>

                        <el-table-column label="课程名称" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.courseName}}
							</template>
                        </el-table-column>

                        <el-table-column label="教工id" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.teacherId}}
							</template>
                        </el-table-column>

                        <el-table-column label="教工姓名" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.teacherName}}
							</template>
                        </el-table-column>

                        <el-table-column label="成绩" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.score}}
							</template>
                        </el-table-column>

                        <el-table-column label="考试类型" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
                                <el-tag v-if="scope.row.flag == 0" type="success">正考</el-tag>
                                <el-tag v-if="scope.row.flag == 1" type="danger">补考</el-tag>
                                <el-tag v-if="scope.row.flag == 2" type="danger">重修</el-tag>
							</template>
                        </el-table-column>

                        <el-table-column fixed="right" label="操作" width="60">
                            <template slot-scope="scope">
								<div class="text-center">
									<el-button style="padding:5px 0;margin:0 auto" @click="" type="text" size="small">查看</el-button>
								</div>
							</template>
                        </el-table-column>
                    </el-table>
                </div>

                <div v-if="index == '1-5'">
                    <el-row>
                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].studentId" placeholder="学号" clearable @clear="()=>{dataModel[index].studentId == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].studentName" placeholder="学生姓名" clearable @clear="()=>{dataModel[index].studentName == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-select class="w-100" v-model="dataModel[index].gender" placeholder="性别" clearable @clear="()=>{dataModel[index].gender == undefined}">
                                <el-option label="男" value="男">
                                </el-option>
                                <el-option label="女" value="女">
                                </el-option>
                            </el-select>
                        </el-col>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].departmentName" placeholder="院系名称" clearable @clear="()=>{dataModel[index].departmentName == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].majorName" placeholder="专业名称" clearable @clear="()=>{dataModel[index].majorName == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="6" :sm="3" :md="3">
                            <el-input class="w-100" v-model="dataModel[index].grade" placeholder="年级" clearable @clear="()=>{dataModel[index].grade == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="6" :sm="3" :md="3">
                            <el-input class="w-100" v-model="dataModel[index].years" placeholder="学制" clearable @clear="()=>{dataModel[index].years == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].classId" placeholder="班级编号" clearable @clear="()=>{dataModel[index].classId == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].seat" placeholder="座号" clearable @clear="()=>{dataModel[index].seat == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="12" :md="12">
                            <el-input class="w-100" v-model="dataModel[index].contact" placeholder="联系方式" clearable @clear="()=>{dataModel[index].contact == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="12" :md="12">
                            <el-select class="w-100" v-model="dataModel[index].active" placeholder="账号状态" clearable @clear="()=>{dataModel[index].active == undefined}">
                                <el-option label="已激活" value="1">
                                </el-option>
                                <el-option label="未激活" value="0">
                                </el-option>
                            </el-select>
                        </el-col>

                        <el-col :xs="24" :sm="24" :md="24">
                            <el-button class="w-100" @click="()=>{getData()}">搜索</el-button>
                        </el-col>

                        <el-col :xs="24" :sm="24" :md="24">
                            <el-button class="w-100" @click="()=>{controller['1-5'].add = true ; getGrade() }">添加</el-button>
                        </el-col>
                    </el-row>

                    <el-table :data="data" style="width: 100%" border>
                        <el-table-column label="学号" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.studentId}}
							</template>
                        </el-table-column>

                        <el-table-column label="学生姓名" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.studentName}}
							</template>
                        </el-table-column>

                        <el-table-column label="年级" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.grade}}级
							</template>
                        </el-table-column>

                        <el-table-column label="院系名" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.departmentName}}
							</template>
                        </el-table-column>

                        <el-table-column label="专业编号" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.majorId}}
							</template>
                        </el-table-column>

                        <el-table-column label="专业名称" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.majorName}}
							</template>
                        </el-table-column>

                        <el-table-column label="学制" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.years}}年
							</template>
                        </el-table-column>

                        <el-table-column label="班级编号" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.classId}}
							</template>
                        </el-table-column>

                        <el-table-column label="班号" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.class}}班
							</template>
                        </el-table-column>

                        <el-table-column label="座号" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
                                {{scope.row.seat}}
							</template>
                        </el-table-column>

                        <el-table-column label="出生日期" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
                                {{scope.row.both}}
							</template>
                        </el-table-column>

                        <el-table-column label="联系方式" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
                                {{scope.row.contact}}
							</template>
                        </el-table-column>

                        <el-table-column label="联系地址" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
                                {{scope.row.address}}
							</template>
                        </el-table-column>

                        <el-table-column label="身份证号码" width="180" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
                                {{scope.row.idCard}}
							</template>
                        </el-table-column>

                        <el-table-column label="学生照片" width="100">
                            <template slot-scope="scope">
                                <div class="mx-auto text-center">
                                    <el-image v-if="scope.row.studentImg != null && scope.row.studentImg.length != 0" :preview-src-list="[scope.row.studentImg]"
                                    style="width: 100%;height:50px;" :src="scope.row.studentImg" fit="scale-down">
                                    </el-image>
                                    <span v-else> 未录入照片 </span>
                                </div>
                                </template>
                        </el-table-column>

                        <el-table-column label="账号状态" width="100" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
                                <el-tag v-if="scope.row.active == 1" type="success">已激活</el-tag>
                                <el-tag v-if="scope.row.active == 0" type="danger">未激活</el-tag>
							</template>
                        </el-table-column>

                        <el-table-column fixed="right" label="操作" width="60">
                            <template slot-scope="scope">
								<div class="text-center">
                                    <el-button style="padding:5px 0;margin:0 auto" @click="" type="text" size="small">查看</el-button>
                                    <el-button style="padding:5px 0;margin:0 auto" @click="(v)=>{
                                        updateModel['1-5'].info = scope.row
                                        updateModel['1-5'].info.bothData = scope.row.both == '0000-00-00'?undefined:scope.row.both 
                                        controller['1-5'].update = true
                                    }" type="text" size="small">修改</el-button>
								</div>
							</template>
                        </el-table-column>
                    </el-table>
                </div>

                <el-dialog title="修改学生信息" v-if="controller['1-5'].update" :visible.sync="controller['1-5'].update" :show-close="true" :close-on-press-escape="true" :close-on-click-modal="false" :fullscreen="true">
                    <el-row>
                        <el-row style="vertical-align: middle;">

                            <el-col :xs="24" :sm="12" :md="6">
                                <el-form label-position="left" inline class="table-expand">
                                    <el-form-item label="学生姓名">
                                        <el-input class="w-100" v-model="updateModel['1-5'].info.studentName" clearable></el-input>
                                    </el-form-item>
                                </el-form>
                            </el-col>

                            <el-col :xs="24" :sm="12" :md="6">
                                <el-form label-position="left" inline class="table-expand">
                                    <el-form-item label="性别">
                                        <el-select class="w-100" filterable placeholder="性别" v-model="updateModel['1-5'].info.gender" clearable>
                                            <el-option label="男" value="男"></el-option>
                                            <el-option label="女" value="女"></el-option>
                                        </el-select>
                                    </el-form-item>
                                </el-form>
                            </el-col>

                            <el-col :xs="24" :sm="12" :md="6">
                                <el-form label-position="left" inline class="table-expand">
                                    <el-form-item label="身份证号码">
                                        <el-input class="w-100" v-model="updateModel['1-5'].info.idCard" minlength="15" maxlength="18" clearable></el-input>
                                    </el-form-item>
                                </el-form>
                            </el-col>

                            <el-col :xs="24" :sm="12" :md="6">
                                <el-form label-position="left" inline class="table-expand">
                                    <el-form-item label="联系电话">
                                        <el-input class="w-100" v-model="updateModel['1-5'].info.contact" maxlength="20" clearable></el-input>
                                    </el-form-item>
                                </el-form>
                            </el-col>

                            <el-col :xs="24" :sm="12" :md="4">
                                <el-form label-position="left" inline class="table-expand">
                                    <el-form-item label="年级">
                                        <span>{{updateModel['1-5'].info.grade}} 级</span>
                                    </el-form-item>
                                </el-form>
                            </el-col>

                            <el-col :xs="24" :sm="12" :md="4">
                                <el-form label-position="left" inline class="table-expand">
                                    <el-form-item label="院系">
                                        <span>{{updateModel['1-5'].info.departmentName}}</span>
                                    </el-form-item>
                                </el-form>
                            </el-col>

                            <el-col :xs="24" :sm="12" :md="4">
                                <el-form label-position="left" inline class="table-expand">
                                    <el-form-item label="专业">
                                        <span>{{updateModel['1-5'].info.majorName}}</span>
                                    </el-form-item>
                                </el-form>
                            </el-col>

                            <el-col :xs="24" :sm="12" :md="4">
                                <el-form label-position="left" inline class="table-expand">
                                    <el-form-item label="学制">
                                        <span>{{updateModel['1-5'].info.years}} 年</span>
                                    </el-form-item>
                                </el-form>
                            </el-col>

                            <el-col :xs="24" :sm="12" :md="4">
                                <el-form label-position="left" inline class="table-expand">
                                    <el-form-item label="班级">
                                        <span>{{updateModel['1-5'].info.class}} 班</span>
                                    </el-form-item>
                                </el-form>
                            </el-col>

                            <el-col :xs="24" :sm="12" :md="4">
                                <el-form label-position="left" inline class="table-expand">
                                    <el-form-item label="座号">
                                        <span>{{updateModel['1-5'].info.seat}} 号</span>
                                    </el-form-item>
                                </el-form>
                            </el-col>

                            <el-col :xs="24" :sm="12" :md="6">
                                <el-form label-position="left" inline class="table-expand">
                                    <el-form-item label="出生日期">
                                        <el-date-picker class="w-100" type="date" placeholder="选择日期" @blur="()=>{this.$forceUpdate()}" @change="(v)=>{this.$set(updateModel['1-5'].info,'bothData',v)}" v-model="updateModel['1-5'].info.bothData" clearable>
                                        </el-date-picker>
                                    </el-form-item>
                                </el-form>
                            </el-col>

                            <el-col :xs="24" :sm="24" :md="24">
                                <el-form label-position="left" inline class="table-expand">
                                    <el-form-item label="联系地址">
                                    </el-form-item>
                                    <el-input class="w-100" v-model="updateModel['1-5'].info.address" clearable></el-input>
                                </el-form>
                            </el-col>

                            <el-col :xs="24" :sm="24" :md="24">
                                <el-form label-position="left" inline class="table-expand">
                                    <el-form-item label="学生照片">
                                        <el-image v-if="updateModel['1-5'].info.studentImg != null && updateModel['1-5'].info.studentImg != ''" :preview-src-list="[updateModel['1-5'].info.studentImg]
                                            " style="width: 10rem;height:10rem;" :src="updateModel['1-5'].info.studentImg == undefined?'./Storage/undefined.jpg':updateModel['1-5'].info.studentImg " fit="scale-down">
                                        </el-image>
                                        <span v-else> 未录入照片 </span>
                                        <br>
                                        <el-button @click="()=>{studentImgUpload()}" type="mini">上传学生照片</el-button>
                                    </el-form-item>
                                </el-form>

                                <input id="studentImgUpload" style="display: none;" class="btn" type="file" onchange="management.imgUpdate(this,'info','studentImg')" accept="image/png,image/gif,image/jpeg" />

                            </el-col>

                        </el-row>
                    </el-row>

                    <span slot="footer" class="dialog-footer">
                            <el-button @click="()=>{getData();controller['1-5'].update = false}">取 消</el-button>
                            <el-button type="primary" @click="()=>{ 
                                updateModel['1-5'].info.both = getDate(updateModel['1-5'].info.bothData)
                                updateModel['1-5'].data.studentId = updateModel['1-5'].info.studentId
                                updateData()
                            }">确 定</el-button>
                    </span>
                </el-dialog>

                <el-dialog title="添加学生信息" :visible.sync="controller['1-5'].add" :show-close="true" :close-on-press-escape="true" :close-on-click-modal="false" :fullscreen="true">
                    <el-row>
                        <el-row style="vertical-align: middle;">

                            <el-col :xs="24" :sm="12" :md="6">
                                <el-form label-position="left" inline class="table-expand">
                                    <el-form-item label="学生姓名">
                                        <el-input class="w-100" v-model="addModel['1-5'].studentName" clearable></el-input>
                                    </el-form-item>
                                </el-form>
                            </el-col>

                            <el-col :xs="24" :sm="12" :md="6">
                                <el-form label-position="left" inline class="table-expand">
                                    <el-form-item label="性别">
                                        <el-select class="w-100" filterable placeholder="性别" v-model="addModel['1-5'].gender" clearable>
                                            <el-option label="男" value="男"></el-option>
                                            <el-option label="女" value="女"></el-option>
                                        </el-select>
                                    </el-form-item>
                                </el-form>
                            </el-col>

                            <el-col :xs="24" :sm="12" :md="6">
                                <el-form label-position="left" inline class="table-expand">
                                    <el-form-item label="身份证号码">
                                        <el-input class="w-100" v-model="addModel['1-5'].idCard" minlength="15" maxlength="18" clearable></el-input>
                                    </el-form-item>
                                </el-form>
                            </el-col>

                            <el-col :xs="24" :sm="12" :md="6">
                                <el-form label-position="left" inline class="table-expand">
                                    <el-form-item label="联系电话">
                                        <el-input class="w-100" v-model="addModel['1-5'].contact" maxlength="20" clearable></el-input>
                                    </el-form-item>
                                </el-form>
                            </el-col>

                            <el-col :xs="24" :sm="12" :md="6">
                                <el-form label-position="left" inline class="table-expand">
                                    <el-form-item label="年级">
                                        <el-select v-model="addModel['1-5'].grade" @change="(v)=>{getGradeDepartment(v);addModel['1-5'].departmentId = undefined }" filterable placeholder="请选择年级">
                                            <el-option v-for="(v,k) in gradeList" :key="v.grade" :label="v.grade + '级'" :value="v.grade">
                                            </el-option>
                                        </el-select>
                                    </el-form-item>
                                </el-form>
                            </el-col>

                            <el-col :xs="24" :sm="12" :md="6">
                                <el-form label-position="left" inline class="table-expand">
                                    <el-form-item label="院系">
                                        <el-select :disabled="addModel['1-5'].grade == null" v-model="addModel['1-5'].departmentId" @change="(v)=>{getGradeMajor(addModel['1-5'].grade,v);addModel['1-5'].majorId = undefined }" filterable placeholder="请选择院系">
                                            <el-option v-for="(v,k) in departmentList" :key="v.departmentId" :label="v.departmentName" :value="v.departmentId">
                                            </el-option>
                                        </el-select>
                                    </el-form-item>
                                </el-form>
                            </el-col>

                            <el-col :xs="24" :sm="12" :md="6">
                                <el-form label-position="left" inline class="table-expand">
                                    <el-form-item label="专业">
                                        <el-select :disabled="addModel['1-5'].departmentId == null" v-model="addModel['1-5'].majorId" @change="(v)=>{getGradeClass(addModel['1-5'].grade,addModel['1-5'].departmentId,v,addModel['1-5'].years);addModel['1-5'].class = undefined }" filterable placeholder="请选择院系">
                                            <el-option v-for="(v,k) in majorList" :key="v.departmentId + v.majorId" :label="v.majorName" :value="v.majorId">
                                            </el-option>
                                        </el-select>
                                    </el-form-item>
                                </el-form>
                            </el-col>

                            <el-col :xs="24" :sm="12" :md="6">
                                <el-form label-position="left" inline class="table-expand">
                                    <el-form-item label="学制">
                                        <!-- <span>{{data.x}}</span> -->
                                        <el-input-number :disabled="addModel['1-5'].majorId == null" @change="(v)=>{getGradeClass(addModel['1-5'].grade,addModel['1-5'].departmentId,addModel['1-5'].majorId,v);addModel['1-5'].class = undefined }" class="w-100" v-model="addModel['1-5'].years"
                                            :min="1" :precision="0" :step="1" :max="9"></el-input-number>
                                    </el-form-item>
                                </el-form>
                            </el-col>

                            <el-col :xs="24" :sm="12" :md="6">
                                <el-form label-position="left" inline class="table-expand">
                                    <el-form-item label="班级">
                                        <el-select :disabled="addModel['1-5'].majorId == null" v-model="addModel['1-5'].class" @change="(v)=>{}" filterable placeholder="请选择班级">
                                            <el-option v-for="(v,k) in classList" :key="v.class" :label="v.class + '班'" :value="v.class">
                                            </el-option>
                                        </el-select>
                                    </el-form-item>
                                </el-form>
                            </el-col>

                            <el-col :xs="24" :sm="12" :md="6">
                                <el-form label-position="left" inline class="table-expand">
                                    <el-form-item label="座号">
                                        <!-- <span>{{data.x}}</span> -->
                                        <el-input-number :disabled="addModel['1-5'].class == null" class="w-100" v-model="addModel['1-5'].seatData" @change="(v)=>{ v < 10?addModel['1-5'].seat = '0'+v:addModel['1-5'].seat = v }" :min="1" :precision="0" :step="1" :max="99"></el-input-number>
                                    </el-form-item>
                                </el-form>
                            </el-col>

                            <el-col :xs="24" :sm="12" :md="6">
                                <el-form label-position="left" inline class="table-expand">
                                    <el-form-item label="出生日期">
                                        <el-date-picker class="w-100" type="date" placeholder="选择日期" @blur="()=>{this.$forceUpdate()}" @change="(v)=>{this.$set(addModel['1-5'],'bothData',v)}" v-model="addModel['1-5'].bothData" clearable>
                                        </el-date-picker>
                                    </el-form-item>
                                </el-form>
                            </el-col>

                            <el-col :xs="24" :sm="24" :md="24">
                                <el-form label-position="left" inline class="table-expand">
                                    <el-form-item label="联系地址">
                                    </el-form-item>
                                    <el-input class="w-100" v-model="addModel['1-5'].address" clearable></el-input>
                                </el-form>
                            </el-col>

                            <el-col :xs="24" :sm="24" :md="24">
                                <el-form label-position="left" inline class="table-expand">
                                    <el-form-item label="学生照片">
                                        <el-image v-if="addModel['1-5'].studentImg != null && addModel['1-5'].studentImg != ''" :preview-src-list="[addModel['1-5'].studentImg]
                                            " style="width: 10rem;height:10rem;" :src="addModel['1-5'].studentImg == undefined?'./Storage/undefined.jpg':addModel['1-5'].studentImg " fit="scale-down">
                                        </el-image>
                                        <span v-else> 未录入照片 </span>
                                        <br>
                                        <el-button @click="()=>{studentImgUpload()}" type="mini">上传学生照片</el-button>
                                    </el-form-item>
                                </el-form>

                                <input id="studentImgUpload" style="display: none;" class="btn" type="file" onchange="management.imgAdd(this,'studentImg')" accept="image/png,image/gif,image/jpeg" />

                            </el-col>

                        </el-row>
                    </el-row>

                    <span slot="footer" class="dialog-footer">
                            <el-button @click="()=>{getData();controller['1-5'].add = false}">取 消</el-button>
                            <el-button type="primary" @click="()=>{
                                addModel['1-5'].classId = addModel['1-5'].grade + addModel['1-5'].years + addModel['1-5'].departmentId + addModel['1-5'].majorId + addModel['1-5'].class;
                                addModel['1-5'].studentId = addModel['1-5'].classId + addModel['1-5'].seat;
                                addModel['1-5'].both = getDate(addModel['1-5'].bothData)
                                addData()}">确 定</el-button>
                    </span>
                </el-dialog>

                <div v-if="index == '1-6'">
                    <el-row>
                        <!-- <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].courseId" placeholder="课程编号" clearable @clear="()=>{dataModel[index].courseId == undefined}">
                            </el-input>
                        </el-col> -->

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].courseName" placeholder="课程名称" clearable @clear="()=>{dataModel[index].courseName == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].studentId" placeholder="学号" clearable @clear="()=>{dataModel[index].studentId == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].studentName" placeholder="学生姓名" clearable @clear="()=>{dataModel[index].studentName == undefined}">
                            </el-input>
                        </el-col>

                        <!-- <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].teacherId" placeholder="教工id" clearable @clear="()=>{dataModel[index].teacherId == undefined}">
                            </el-input>
                        </el-col> -->

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].teacherName" placeholder="教工姓名" clearable @clear="()=>{dataModel[index].teacherName == undefined}">
                            </el-input>
                        </el-col>


                        <el-col :xs="24" :sm="24" :md="24">
                            <el-select class="w-100" v-model="dataModel[index].flag" placeholder="考试类型" clearable @clear="()=>{dataModel[index].flag == undefined}">
                                <el-option label="正考" value="0">
                                </el-option>
                                <el-option label="补考" value="1">
                                </el-option>
                                <el-option label="重修" value="2">
                                </el-option>
                            </el-select>
                        </el-col>

                        <el-col :xs="24" :sm="24" :md="24">
                            <el-button class="w-100" @click="()=>{getData()}">搜索</el-button>
                        </el-col>
                    </el-row>

                    <el-table :data="data" style="width: 100%" border>
                        <el-table-column label="学号" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.studentId}}
							</template>
                        </el-table-column>

                        <el-table-column label="学生姓名" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.studentName}}
							</template>
                        </el-table-column>

                        <el-table-column label="课程id" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.courseId}}
							</template>
                        </el-table-column>

                        <el-table-column label="课程名称" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.courseName}}
							</template>
                        </el-table-column>

                        <el-table-column label="教工id" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.teacherId}}
							</template>
                        </el-table-column>

                        <el-table-column label="教工姓名" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.teacherName}}
							</template>
                        </el-table-column>

                        <el-table-column label="成绩" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.score}}
							</template>
                        </el-table-column>

                        <el-table-column label="考试类型" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
                                <el-tag v-if="scope.row.flag == 0" type="success">正考</el-tag>
                                <el-tag v-if="scope.row.flag == 1" type="danger">补考</el-tag>
                                <el-tag v-if="scope.row.flag == 2" type="danger">重修</el-tag>
							</template>
                        </el-table-column>

                        <el-table-column fixed="right" label="操作" width="60">
                            <template slot-scope="scope">
								<div class="text-center">
									<el-button style="padding:5px 0;margin:0 auto" @click="" type="text" size="small">查看</el-button>
								</div>
							</template>
                        </el-table-column>
                    </el-table>
                </div>

                <div v-if="index == '2-1'">
                    <el-row>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].teacherName" placeholder="教工姓名" clearable @clear="()=>{dataModel[index].teacherName == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-select class="w-100" v-model="dataModel[index].gender" placeholder="性别" clearable @clear="()=>{dataModel[index].gender == undefined}">
                                <el-option label="男" value="男">
                                </el-option>
                                <el-option label="女" value="女">
                                </el-option>
                            </el-select>
                        </el-col>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].departmentName" placeholder="院系名称" clearable @clear="()=>{dataModel[index].departmentName == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].email" placeholder="邮箱地址" clearable @clear="()=>{dataModel[index].email == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].contact" placeholder="联系方式" clearable @clear="()=>{dataModel[index].contact == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-select class="w-100" v-model="dataModel[index].permission" placeholder="用户组" clearable @clear="()=>{dataModel[index].permission == undefined}">
                                <el-option label="普通教工" value="2">
                                </el-option>
                                <el-option label="管理员" value="1">
                                </el-option>
                                <el-option label="超级管理员" value="0">
                                </el-option>
                            </el-select>
                        </el-col>

                        <el-col :xs="24" :sm="6" :md="6">
                            <el-select class="w-100" v-model="dataModel[index].active" placeholder="账号状态" clearable @clear="()=>{dataModel[index].active == undefined}">
                                <el-option label="已激活" value="1">
                                </el-option>
                                <el-option label="未激活" value="0">
                                </el-option>
                            </el-select>
                        </el-col>

                        <el-col :xs="24" :sm="24" :md="24">
                            <el-button class="w-100" @click="()=>{getData()}">搜索</el-button>
                        </el-col>
                    </el-row>

                    <el-table :data="data" style="width: 100%" border>
                        <el-table-column label="教工id" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.teacherId}}
							</template>
                        </el-table-column>

                        <el-table-column label="教工姓名" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.teacherName}}
							</template>
                        </el-table-column>

                        <el-table-column label="邮箱地址" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.email}}
							</template>
                        </el-table-column>

                        <el-table-column label="院系编号" width="100" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.departmentId}}
							</template>
                        </el-table-column>

                        <el-table-column label="院系名称" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.departmentName}}
							</template>
                        </el-table-column>

                        <el-table-column label="联系方式" width="100" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.content}}
							</template>
                        </el-table-column>

                        <el-table-column label="出生日期" width="120" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.both}}
							</template>
                        </el-table-column>

                        <el-table-column label="性别" width="100" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.gender}}
							</template>
                        </el-table-column>

                        <el-table-column label="身份证号码" width="100" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.idCard}}
							</template>
                        </el-table-column>

                        <el-table-column label="联系地址" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.address}}
							</template>
                        </el-table-column>

                        <el-table-column label="教工照片" width="100">
                            <template slot-scope="scope">
                                <div class="mx-auto text-center">
                                    <el-image v-if="scope.row.teacherImg != null && scope.row.teacherImg.length != 0" :preview-src-list="[scope.row.teacherImg]"
                                    style="width: 100%;height:50px;" :src="scope.row.teacherImg" fit="scale-down">
                                    </el-image>
                                    <span v-else> 未录入照片 </span>
                                </div>
                                </template>
                        </el-table-column>

                        <el-table-column label="用户组" width="120" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
                                <el-tag type="success" v-if="scope.row.permission == 0">超级管理员</el-tag>
                                <el-tag type="warning" v-else-if="scope.row.permission == 1">管理员</el-tag>
                                <el-tag v-else-if="scope.row.permission == 2">普通教工</el-tag>
                                <el-tag type="danger" v-else>未知</el-tag>
                            </template>
                        </el-table-column>

                        <el-table-column label="账号状态" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
                                <el-tag type="success" v-if="scope.row.active == 1">启用</el-tag>
                                <el-tag type="danger" v-if="scope.row.active == 0">未启用</el-tag>
                            </template>
                        </el-table-column>

                        <el-table-column fixed="right" label="操作" width="60">
                            <template slot-scope="scope">
								<div class="text-center">
									<el-button style="padding:5px 0;margin:0 auto" @click="" type="text" size="small">查看</el-button>
								</div>
							</template>
                        </el-table-column>
                    </el-table>
                </div>

                <div v-if="index == '3'">
                    <el-row>
                        <el-col :xs="12" :sm="8" :md="8">
                            <el-input class="w-100" v-model="dataModel[index].departmentId" placeholder="院系编号" clearable @clear="()=>{dataModel[index].departmentId == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="8" :md="8">
                            <el-input class="w-100" v-model="dataModel[index].departmentName" placeholder="院系名称" clearable @clear="()=>{dataModel[index].departmentName == undefined}">
                            </el-input>
                        </el-col>


                        <el-col :xs="24" :sm="8" :md="8">
                            <el-select class="w-100" v-model="dataModel[index].active" placeholder="启用状态" clearable @clear="()=>{dataModel[index].active == undefined}">
                                <el-option label="已启用" value="1">
                                </el-option>
                                <el-option label="未启用" value="0">
                                </el-option>
                            </el-select>
                        </el-col>

                        <el-col :xs="24" :sm="24" :md="24">
                            <el-button class="w-100" @click="()=>{getData()}">搜索</el-button>
                        </el-col>
                    </el-row>

                    <el-table :data="data" style="width: 100%" border>
                        <el-table-column label="院系编号" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.departmentId}}
							</template>
                        </el-table-column>

                        <el-table-column label="院系名称" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.departmentName}}
							</template>
                        </el-table-column>

                        <el-table-column label="状态" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
                                <el-tag v-if="scope.row.active == 1" type="success">启用</el-tag>
                                <el-tag v-if="scope.row.active == 0" type="danger">未启用</el-tag>
							</template>
                        </el-table-column>

                        <el-table-column fixed="right" label="操作" width="60">
                            <template slot-scope="scope">
								<div class="text-center">
									<el-button style="padding:5px 0;margin:0 auto" @click="" type="text" size="small">查看</el-button>
								</div>
							</template>
                        </el-table-column>
                    </el-table>
                </div>

                <div v-if="index == '4'">
                    <el-row>
                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].departmentId" placeholder="院系编号" clearable @clear="()=>{dataModel[index].departmentId == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].departmentName" placeholder="院系名称" clearable @clear="()=>{dataModel[index].departmentName == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].majorId" placeholder="专业编号" clearable @clear="()=>{dataModel[index].majorId == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].majorName" placeholder="专业名称" clearable @clear="()=>{dataModel[index].majorName == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="24" :sm="24" :md="24">
                            <el-select class="w-100" v-model="dataModel[index].active" placeholder="启用状态" clearable @clear="()=>{dataModel[index].active == undefined}">
                                <el-option label="已启用" value="1">
                                </el-option>
                                <el-option label="未启用" value="0">
                                </el-option>
                            </el-select>
                        </el-col>

                        <el-col :xs="24" :sm="24" :md="24">
                            <el-button class="w-100" @click="()=>{getData()}">搜索</el-button>
                        </el-col>
                    </el-row>

                    <el-table :data="data" style="width: 100%" border>
                        <el-table-column label="院系编号" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.departmentId}}
							</template>
                        </el-table-column>

                        <el-table-column label="院系名称" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.departmentName}}
							</template>
                        </el-table-column>

                        <el-table-column label="专业编号" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.majorId}}
							</template>
                        </el-table-column>

                        <el-table-column label="专业名称" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.majorName}}
							</template>
                        </el-table-column>

                        <el-table-column label="状态" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
                                <el-tag v-if="scope.row.active == 1" type="success">启用</el-tag>
                                <el-tag v-if="scope.row.active == 0" type="danger">未启用</el-tag>
							</template>
                        </el-table-column>

                        <el-table-column fixed="right" label="操作" width="60">
                            <template slot-scope="scope">
								<div class="text-center">
									<el-button style="padding:5px 0;margin:0 auto" @click="" type="text" size="small">查看</el-button>
								</div>
							</template>
                        </el-table-column>
                    </el-table>
                </div>

                <div v-if="index == '5'">
                    <el-row>
                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].departmentId" placeholder="院系编号" clearable @clear="()=>{dataModel[index].departmentId == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].departmentName" placeholder="院系名称" clearable @clear="()=>{dataModel[index].departmentName == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].majorId" placeholder="专业编号" clearable @clear="()=>{dataModel[index].majorId == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].majorName" placeholder="专业名称" clearable @clear="()=>{dataModel[index].majorName == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="24" :sm="24" :md="24">
                            <el-input class="w-100" v-model="dataModel[index].grade" placeholder="年级" clearable @clear="()=>{dataModel[index].grade == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="24" :sm="24" :md="24">
                            <el-button class="w-100" @click="()=>{getData()}">搜索</el-button>
                        </el-col>
                    </el-row>

                    <el-table :data="data" style="width: 100%" border>
                        <el-table-column label="年级" width="100" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.grade}}级
							</template>
                        </el-table-column>

                        <el-table-column label="院系编号" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.departmentId}}
							</template>
                        </el-table-column>

                        <el-table-column label="院系名称" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.departmentName}}
							</template>
                        </el-table-column>

                        <el-table-column label="专业编号" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.majorId}}
							</template>
                        </el-table-column>

                        <el-table-column label="专业名称" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.majorName}}
							</template>
                        </el-table-column>

                        <el-table-column label="最大班级数量" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.classNum}}
							</template>
                        </el-table-column>

                        <el-table-column fixed="right" label="操作" width="60">
                            <template slot-scope="scope">
								<div class="text-center">
									<el-button style="padding:5px 0;margin:0 auto" @click="" type="text" size="small">查看</el-button>
								</div>
							</template>
                        </el-table-column>
                    </el-table>
                </div>

                <div v-if="index == '6'">
                    <el-row>
                        <el-col :xs="6" :sm="3" :md="3">
                            <el-input class="w-100" v-model="dataModel[index].grade" placeholder="年级" clearable @clear="()=>{dataModel[index].grade == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="6" :sm="3" :md="3">
                            <el-input class="w-100" v-model="dataModel[index].years" placeholder="学制" clearable @clear="()=>{dataModel[index].years == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].departmentId" placeholder="院系编号" clearable @clear="()=>{dataModel[index].departmentId == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].departmentName" placeholder="院系名称" clearable @clear="()=>{dataModel[index].departmentName == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].majorId" placeholder="专业编号" clearable @clear="()=>{dataModel[index].majorId == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].majorName" placeholder="专业名称" clearable @clear="()=>{dataModel[index].majorName == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="12" :sm="6" :md="6">
                            <el-input class="w-100" v-model="dataModel[index].classId" placeholder="班级编号" clearable @clear="()=>{dataModel[index].classId == undefined}">
                            </el-input>
                        </el-col>

                        <el-col :xs="24" :sm="24" :md="24">
                            <el-button class="w-100" @click="()=>{getData()}">搜索</el-button>
                        </el-col>
                    </el-row>

                    <el-table :data="data" style="width: 100%" border>
                        <el-table-column label="年级" width="100" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.grade}}级
							</template>
                        </el-table-column>

                        <el-table-column label="学制" width="100" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.years}}年
							</template>
                        </el-table-column>

                        <el-table-column label="院系编号" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.departmentId}}
							</template>
                        </el-table-column>

                        <el-table-column label="院系名称" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.departmentName}}
							</template>
                        </el-table-column>

                        <el-table-column label="专业编号" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.majorId}}
							</template>
                        </el-table-column>

                        <el-table-column label="专业名称" width="155" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.majorName}}
							</template>
                        </el-table-column>

                        <el-table-column label="班级编号" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.classId}}
							</template>
                        </el-table-column>

                        <el-table-column label="班号" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.class}}班
							</template>
                        </el-table-column>

                        <el-table-column label="学生数量" :show-overflow-tooltip="true">
                            <template slot-scope="scope">
								{{scope.row.studentNum}}人
							</template>
                        </el-table-column>

                        <el-table-column fixed="right" label="操作" width="60">
                            <template slot-scope="scope">
								<div class="text-center">
									<el-button style="padding:5px 0;margin:0 auto" @click="" type="text" size="small">查看</el-button>
								</div>
							</template>
                        </el-table-column>
                    </el-table>
                </div>


                <el-pagination @size-change="(v)=>{num = v ;getData() }" @current-change="(v)=>{getData()}" :total="total" :current-page.sync="page" :page-sizes="[10,20,50,100,200,500,1000]" :page-size="num" layout="total,sizes,prev, pager, next, jumper">
                </el-pagination>

            </el-col>
        </el-row>
    </div>
    <script>
        var management = new Vue({
            el: "#management",
            data() {
                return {
                    index: '1-1',
                    collapse: false,
                    nav_Menu_xs: 24,
                    nav_Menu_sm: 4,
                    nav_Menu_md: 4,

                    identity: undefined,
                    permission: undefined,
                    permissionList: {
                        0: '超级管理员',
                        1: '管理员',
                        2: '普通教工'
                    },
                    permissionName: undefined,

                    data: undefined,
                    page: 1,
                    num: 10,
                    total: 0,

                    arg: undefined,


                    dataChannel: {
                        '1-1': './System/Core/API/Course/GetCourse/index.php',
                        '1-2': './System/Core/API/Class/GetClass/index.php',
                        '1-3': './System/Core/API/Management/GetStudent/index.php',
                        '1-4': './System/Core/API/Score/GetScore/index.php',
                        '1-5': './System/Core/API/Management/GetStudent/index.php',
                        '1-6': './System/Core/API/Score/GetScore/index.php',

                        '2-1': './System/Core/API/Management/GetTeacher/index.php',

                        '3': './System/Core/API/Department/GetDepartment/index.php',

                        '4': './System/Core/API/Major/GetMajor/index.php',

                        '5': './System/Core/API/Grade/GetGrade/index.php',

                        '6': './System/Core/API/Class/GetClass/index.php',
                    },

                    delChannel: {},
                    updateChannel: {
                        '1-5': './System/Core/API/Management/UpdateStudent/index.php',
                    },
                    addChannel: {

                        '1-5': './System/Core/API/Management/AddStudent/index.php',

                    },

                    controller: {
                        '1-5': {
                            add: false,
                            update: false,
                        }
                    },

                    delModel: {},
                    updateModel: {
                        '1-5': {
                            data: {
                                studentId: undefined,
                            },
                            info: {
                                studentName: undefined,

                                gender: undefined,
                                idCard: undefined,

                                contact: undefined,
                                both: undefined,
                                bothData: undefined,

                                address: undefined,

                                studentImg: undefined,

                                active: undefined,
                            }

                        },
                    },
                    addModel: {
                        '1-5': {
                            studentName: undefined,
                            studentId: undefined,
                            gender: undefined,
                            departmentId: undefined,
                            majorId: undefined,
                            grade: undefined,
                            years: 3,
                            class: undefined,
                            classId: undefined,
                            seat: undefined,
                            idCard: undefined,

                            contact: undefined,
                            both: undefined,


                            address: undefined,

                            studentImg: undefined,

                            seatData: undefined,
                            bothData: undefined,
                        },
                    },

                    dataModel: {
                        '1-1': {
                            courseId: undefined,
                            courseName: undefined,
                            teacherName: undefined,
                            classId: undefined,
                            teacherId: undefined,

                            startTime: undefined,
                            endTime: undefined,
                            public: undefined
                        },
                        '1-2': {
                            departmentId: undefined,
                            departmentName: undefined,
                            majorId: undefined,
                            majorName: undefined,
                            grade: undefined,

                            years: undefined,
                            class: undefined,
                            classId: undefined,
                            studentNum: undefined,
                        },
                        '1-3': {
                            studentName: undefined,
                            studentId: undefined,
                            gender: undefined,
                            departmentId: undefined,
                            departmentName: undefined,
                            majorId: undefined,
                            majorName: undefined,
                            contact: undefined,

                            grade: undefined,
                            years: undefined,
                            class: undefined,
                            classId: undefined,
                            seat: undefined,
                            idCard: undefined,
                            address: undefined,
                            active: undefined
                        },
                        '1-4': {
                            courseId: undefined,
                            courseName: undefined,
                            teacherId: undefined,
                            teacherName: undefined,
                            studentId: undefined,
                            studentName: undefined,

                            score: undefined,
                            flag: undefined,
                        },
                        '1-5': {
                            studentName: undefined,
                            studentId: undefined,
                            gender: undefined,
                            departmentId: undefined,
                            departmentName: undefined,
                            majorId: undefined,
                            majorName: undefined,
                            contact: undefined,

                            grade: undefined,
                            years: undefined,
                            class: undefined,
                            classId: undefined,
                            seat: undefined,
                            idCard: undefined,
                            address: undefined,
                            active: undefined
                        },
                        '1-6': {
                            courseId: undefined,
                            courseName: undefined,
                            teacherId: undefined,
                            teacherName: undefined,
                            studentId: undefined,
                            studentName: undefined,

                            score: undefined,
                            flag: undefined,
                        },

                        '2-1': {
                            teacherName: undefined,
                            departmentId: undefined,
                            departmentName: undefined,
                            gender: undefined,
                            contact: undefined,
                            idCard: undefined,
                            both: undefined,
                            permission: undefined,
                            address: undefined,
                            active: undefined,
                            email: undefined
                        },

                        '3': {
                            departmentId: undefined,
                            departmentName: undefined,
                            active: undefined
                        },

                        '4': {
                            departmentId: undefined,
                            departmentName: undefined,
                            majorId: undefined,
                            majorName: undefined,
                            active: undefined
                        },

                        '5': {
                            departmentId: undefined,
                            departmentName: undefined,
                            majorId: undefined,
                            majorName: undefined,
                            grade: undefined,
                            classNum: undefined
                        },

                        '6': {
                            departmentId: undefined,
                            departmentName: undefined,
                            majorId: undefined,
                            majorName: undefined,
                            grade: undefined,
                            years: undefined,
                            class: undefined,
                            classId: undefined,
                            studentNum: undefined
                        },

                    },

                    classFilter: {},
                    studentFilter: {},

                    gradeList: undefined,
                    departmentList: undefined,
                    majorList: undefined,
                    classList: undefined,
                }
            },
            watch: {
                collapse(n, o) {
                    if (n) {
                        this.nav_Menu_xs = 4
                        this.nav_Menu_sm = 2
                        this.nav_Menu_md = 2
                    } else {
                        this.nav_Menu_xs = 24
                        this.nav_Menu_sm = 4
                        this.nav_Menu_md = 3
                    }
                },
                index(n, o) {
                    Object.keys(management.dataModel[o])
                        .forEach((k) => {
                            management.dataModel[o][k] = undefined;
                        })

                    this.page = 1
                    this.num = 10
                    this.arg = undefined

                    this.getData()
                }
            },
            mounted() {
                axios.post('./System/Core/API/Function/CheckLogin/index.php', Qs.stringify({}), ).then(function(res) {
                    if ('loginStatus' in res.data) {
                        management.login = res.data.loginStatus
                        if (res.data.loginStatus) {
                            axios.post('./System/Core/API/Function/GetIdentity/index.php', Qs.stringify({}), ).then(function(res) {
                                management.identity = res.data.identity
                                if (management.identity != 'Teacher') {
                                    management.$alert('您无权访问此页面', '错误', {
                                        confirmButtonText: '确定',
                                        callback: action => {
                                            location.href = './index.html'
                                        }
                                    });
                                } else {
                                    axios.post('./System/Core/API/Management/GetPermission/index.php', Qs.stringify({}), ).then(function(res) {
                                        management.permission = res.data
                                        management.permissionName = management.permissionList[management.permission]
                                    })

                                    management.getData()
                                }
                            })
                        } else {
                            management.$alert('请先登录', '错误', {
                                confirmButtonText: '确定',
                                callback: action => {
                                    location.href = './login.html'
                                }
                            });
                        }
                    }
                })
            },
            methods: {
                studentImgUpload() {
                    $("#studentImgUpload").click()
                },
                async imgUpdate(img, c, x) {
                    // console.log(img, x)
                    // 生成一个文件读取的对象
                    // console.log(img.files[0])
                    reader = new FileReader();
                    reader.onload = function(ev) {
                            // base64码
                            var imgFile = ev.target.result; //或e.target都是一样的
                            // console.log(imgFile)
                            // data[x] = imgFile
                            // management.addModel[management.index][x] = imgFile
                            management.$set(management.updateModel[management.index][c], x, imgFile)
                        }
                        //发起异步读取文件请求，读取结果为data:url的字符串形式，
                    await reader.readAsDataURL(img.files[0])
                },
                async imgAdd(img, x) {
                    // console.log(img, x)
                    // 生成一个文件读取的对象
                    // console.log(img.files[0])
                    reader = new FileReader();
                    reader.onload = function(ev) {
                            // base64码
                            var imgFile = ev.target.result; //或e.target都是一样的
                            // console.log(imgFile)
                            // data[x] = imgFile
                            // management.addModel[management.index][x] = imgFile
                            management.$set(management.addModel[management.index], x, imgFile)
                        }
                        //发起异步读取文件请求，读取结果为data:url的字符串形式，
                    await reader.readAsDataURL(img.files[0])
                },
                getGrade() {
                    axios.post('./System/Core/API/Grade/GetGrade/index.php', Qs.stringify({
                            "data": JSON.stringify({}),
                            "filter": JSON.stringify({
                                arg: 'distinct',
                                page: 1,
                                num: 9999999
                            }),
                        }))
                        .then(function(res) {
                            if ('error' in res.data) {
                                management.showError(res.data.error)
                            } else {
                                management.$set(management, 'gradeList', res.data.slice(1))
                            }
                        })

                },
                getGradeDepartment(grade) {
                    axios.post('./System/Core/API/Grade/GetGrade/index.php', Qs.stringify({
                            "data": JSON.stringify({
                                'grade': grade,
                                active: 1
                            }),
                            "filter": JSON.stringify({
                                page: 1,
                                num: 9999999
                            }),
                        }))
                        .then(function(res) {
                            if ('error' in res.data) {
                                management.showError(res.data.error)
                            } else {
                                management.$set(management, 'departmentList', res.data.slice(1))
                            }
                        })

                },
                getGradeMajor(grade, department) {
                    axios.post('./System/Core/API/Grade/GetGrade/index.php', Qs.stringify({
                            "data": JSON.stringify({
                                'grade': grade,
                                'departmentId': department,
                                'active': 1
                            }),
                            "filter": JSON.stringify({
                                page: 1,
                                num: 9999999
                            }),
                        }))
                        .then(function(res) {
                            if ('error' in res.data) {
                                management.showError(res.data.error)
                            } else {
                                management.$set(management, 'majorList', res.data.slice(1))
                            }
                        })

                },
                getGradeClass(grade, department, major, years) {
                    axios.post('./System/Core/API/Class/GetClass/index.php', Qs.stringify({
                            "data": JSON.stringify({
                                'grade': grade,
                                'departmentId': department,
                                'majorId': major,
                                'years': years
                            }),
                            "filter": JSON.stringify({
                                page: 1,
                                num: 9999999
                            }),
                        }))
                        .then(function(res) {
                            if ('error' in res.data) {
                                management.showError(res.data.error)
                            } else {
                                management.$set(management, 'classList', res.data.slice(1))
                            }
                        })

                },
                updateData() {
                    Object.keys(management.updateModel[management.index])
                        .forEach((k) => {
                            if (management.updateModel[management.index][k] == null || management.updateModel[management.index][k].length == 0) {
                                // management.dataModel[management.index][k] = undefined;
                                management.$set(management.updateModel[management.index], k, undefined)
                            }

                            Object.keys(management.updateModel[management.index][k]).forEach((key) => {
                                if (management.updateModel[management.index][k][key] == null || management.updateModel[management.index][k][key].length == 0) {
                                    management.$set(management.updateModel[management.index][k], key, undefined)
                                }
                            })
                        })

                    axios.post(management.updateChannel[management.index], Qs.stringify({
                            "data": JSON.stringify(
                                management.updateModel[management.index].data
                            ),
                            "info": JSON.stringify(
                                management.updateModel[management.index].info
                            ),
                        }))
                        .then(function(res) {
                            if ('error' in res.data) {
                                management.showError(res.data.error)
                            }
                            if ('success' in res.data) {
                                management.showSuccess(res.data.success)
                                management.getData()
                            }
                            if ('info' in res.data) {
                                management.showInfo(res.data.info)
                            }
                            if ('warning' in res.data) {
                                management.showWarning(res.data.warning)
                            }
                            console.log(res)
                        })
                },
                addData() {
                    Object.keys(management.addModel[management.index])
                        .forEach((k) => {
                            if (management.addModel[management.index][k] == null || management.addModel[management.index][k].length == 0) {
                                // management.dataModel[management.index][k] = undefined;
                                management.$set(management.addModel[management.index], k, undefined)
                            }
                        })

                    axios.post(management.addChannel[management.index], Qs.stringify({
                            "data": JSON.stringify(
                                management.addModel[management.index]
                            ),
                        }))
                        .then(function(res) {
                            if ('error' in res.data) {
                                management.showError(res.data.error)
                            }
                            if ('success' in res.data) {
                                management.showSuccess(res.data.success)
                                management.getData()
                            }
                            if ('info' in res.data) {
                                management.showInfo(res.data.info)
                            }
                            if ('warning' in res.data) {
                                management.showWarning(res.data.warning)
                            }
                            console.log(res)
                        })
                },
                getData() {

                    Object.keys(management.dataModel[management.index])
                        .forEach((k) => {
                            if (management.dataModel[management.index][k] == null || management.dataModel[management.index][k].length == 0) {
                                // management.dataModel[management.index][k] = undefined;
                                management.$set(management.dataModel[management.index], k, undefined)
                            }
                        })

                    axios.post(management.dataChannel[management.index], Qs.stringify({
                            "data": JSON.stringify(
                                management.dataModel[management.index]
                            ),
                            "filter": JSON.stringify({
                                "page": management.page,
                                "num": management.num,
                                "arg": management.arg
                            })
                        }))
                        .then(function(res) {
                            if ('error' in res.data) {
                                management.showError(res.data.error)
                            } else {
                                management.total = res.data[0]
                                management.data = res.data.slice(1)
                            }

                            console.log(res)
                        })
                },
                getDate(unixTime) {
                    unixTime = new Date(unixTime)
                    Y = unixTime.getFullYear()
                    M = (unixTime.getMonth() + 1) < 10 ? '0' + (unixTime.getMonth() + 1) : (unixTime.getMonth() + 1)
                    D = unixTime.getDate() < 10 ? '0' + unixTime.getDate() : unixTime.getDate()
                    return Y + '-' + M + '-' + D
                },
                getTime(unixTime) {
                    unixTime = new Date(unixTime)
                    Y = unixTime.getFullYear()
                    M = (unixTime.getMonth() + 1) < 10 ? '0' + (unixTime.getMonth() + 1) : (unixTime.getMonth() + 1)
                    D = unixTime.getDate() < 10 ? '0' + unixTime.getDate() : unixTime.getDate()
                    H = unixTime.getHours() < 10 ? '0' + unixTime.getHours() : unixTime.getHours()
                    i = unixTime.getMinutes() < 10 ? '0' + unixTime.getMinutes() : unixTime.getMinutes()
                    S = unixTime.getSeconds() < 10 ? '0' + unixTime.getSeconds() : unixTime.getSeconds()
                    return Y + '-' + M + '-' + D + ' ' + H + ':' + i + ':' + S
                },
                log(v) {
                    console.log(v)
                },
                showWarning(message) {
                    header.$message({
                        showClose: true,
                        message: message,
                        type: 'warning',
                        duration: 5000
                    });
                },
                showInfo(message) {
                    header.$message({
                        showClose: true,
                        message: message,
                        type: 'info',
                        duration: 5000
                    });
                },
                showSuccess(message) {
                    header.$message({
                        showClose: true,
                        message: message,
                        type: 'success',
                        duration: 5000
                    });
                },
                showError(message) {
                    header.$message({
                        showClose: true,
                        message: message,
                        type: 'error',
                        duration: 5000
                    });
                },
                linkTo(target) {
                    linkTo(target)
                },
            }
        })
    </script>

</body>